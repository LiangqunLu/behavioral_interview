准备ML 系统设计面试

Q:我需要准备meta的ML 系统设计的面试，你还有哪些top topics

Q: 挺好的，有几个改进的地方，1）列出top 15 topics，2）每个topic里，加上business objective, 可以量化的online metrics，加上ML的问题分类，是supervised 的regression/classification 还是 unsupervised learning 问题，数据准备上，features 和 labels 从哪里来，features engineering 包括哪些，3）每一个topic都是一个大类别，还可以有好多use case，比如推荐上来说，有电商，news，events，new friends 这些的，列举出来top

Q：我还有几个问题，1）feature engineering 部分需要详细回答，比如structured的特征，text 特征和video/image 怎么处理，2）关于offline 和 online metrics，怎么区别offline 和online的，3）关于部署模型，可以用到哪些工程上的方法，参考meta，youtube或airbnb的推荐模型部署 

Q：我觉得把系统设计分成这几个大部分：Application（应用）、Business Objective（业务目标）、ML Objective and Task Framing（机器学习目标和任务框架）、Data Preparation（数据准备）、Feature Engineering（特征工程）、Model Development（模型开发）、Evaluation（评估）、Model Deployment/Serving（模型部署和服务）， 是不是合理的？每个部分的关键点是什么？这几个部分又是怎么关联的


首先定义问题：
1. Application（应用）定义：明确系统设计的具体场景和背景，描述问题和应用的范围。简短回答：设计一个电商推荐系统，用于向用户推荐商品。

2. Business Objective（业务目标） 定义：系统设计希望达成的业务效果，通常包括具体的量化目标。 简短回答：提高用户购买率和平均订单金额，提升用户体验和满意度，增加用户粘性和互动频率。

3. ML Objective and Task Framing（机器学习目标和任务框架）定义：明确机器学习的具体目标和任务类型，描述如何通过机器学习实现业务目标。简短回答：任务类型是推荐系统，目标是个性化推荐，提高点击率和购买率。

4. Data Preparation（数据准备） 定义：数据的收集、清洗和准备，确保数据质量和一致性。 简短回答：收集用户历史购买数据、浏览数据、商品数据，处理缺失值和重复数据，划分训练集、验证集和测试集。

5. Feature Engineering（特征工程） 定义：从原始数据中提取和处理用于模型训练的特征。 简短回答：提取用户特征（如年龄、性别、历史行为）、商品特征（如类别、价格、品牌）、交互特征（如点击频率、购买频率）。

6. Model Development（模型开发） 定义：选择、训练和调优模型，确保模型性能满足预期。 简短回答：选择推荐算法（如协同过滤、矩阵分解、深度学习模型），使用训练数据进行训练和调优。

7. Evaluation（评估） 定义：评估模型性能，包括离线评估和在线评估，确保模型在训练和生产环境中的表现。 简短回答：离线评估使用准确率、召回率等指标，在线评估通过点击率（CTR）、转化率（CVR）等实时指标评估模型性能。

8. Model Deployment/Serving（模型部署和服务） 定义：将模型部署到生产环境中，并提供实时预测服务，确保模型高效运行和维护。 简短回答：使用云服务部署模型，提供实时推荐API，监控模型性能，定期更新和优化。






A：Topic 和 Business Objective：确定问题背景和业务目标，为后续设计提供方向。
Business Objective 和 ML Objective and Task Framing：业务目标驱动机器学习目标的设定，明确模型的任务类型和性能指标。
ML Objective and Task Framing 和 Data Preparation：明确任务后，准备所需数据，确保数据质量和一致性。
Data Preparation 和 Feature Engineering：在清洗和处理后的数据基础上，进行特征工程，为模型提供高质量输入。
Feature Engineering 和 Model Development：使用特征工程生成的特征，进行模型开发和训练。
Model Development 和 Evaluation：训练好的模型需要进行评估，确保其性能满足预期要求。
Evaluation 和 Model Deployment / Serving：评估通过的模型可以部署到生产环境，并通过在线评估继续监控和优化。
Model Deployment / Serving 和 Business Objective：部署后的模型直接影响业务指标，通过持续监控和优化，确保业务目标的实现。


Q：有两类的机器学习系统设计面试题目，我觉得很难，1）非常vague的描述，推荐系统部门需要提升20%的业绩，怎么做，2）我们有了商业目标，数据，怎么解决这个具体的问题？

A：面对模糊描述的问题时，关键在于澄清业务目标和现有系统，通过分析和实验找到合适的改进策略。对于从商业目标到具体解决方案的问题，则需要将商业目标转化为具体的机器学习任务，进行数据预处理、模型选择和训练，并通过评估和监控确保模型在实际应用中的效果。

年度20%增长的revenue，改进办法包括：
1）增加数据，2）迭代模型，3）个性化策略，4）用户体验优化，比如界面优化，响应速度和反馈机制， 5）多样性和新颖性，6）用户分群和细分市场， 7）A/B测试和实验优化，比如使用多臂老虎机算法优化推荐策略，提高推荐效果。8）多渠道整合，线上线下体验，9）社交推荐和用户互动

Q：那针对具体的问题，我们有了商业目标，数据，怎么解决这个具体的问题？面试官想考察的是什么？因为我只能从feature和model，evaluation，deployment 方面回答，但是这样也不确定是不是想要的答案 
A: 在面试中，当被问到如何解决一个具体的业务问题时，面试官通常希望看到你能全面、系统地考虑问题，并展示你的解决问题的能力。这不仅包括技术层面的特征工程、模型选择、评估和部署，还包括对业务目标的理解、策略的制定、实验的设计和持续优化等方面。

面试官可能考察的内容
1. 问题分析能力：是否能清晰地理解和阐述问题，明确商业目标和技术目标。
2. 全面思考：是否能全面考虑数据、模型、特征工程、评估、部署和优化等各个方面，而不仅仅局限于模型选择。
3. 业务理解：是否能将业务目标转化为技术实现，并清楚解释如何通过技术手段实现业务目标。
4. 技术能力：是否熟悉各种机器学习算法、模型训练和评估方法，能够合理选择和应用。
5. 创新和优化：是否能提出有创意的解决方案和优化策略，展示持续改进的能力。
6. 沟通表达：是否能清晰、结构化地表达自己的思路和方案，与面试官进行有效的交流。

Q：有个困惑，我很反感面试的这种没有具体solution的，我又很怕向面试官clarification，我完全有这些知识和分析能力，但是面试官一直有点challenge，我就容易陷入到自我怀疑当中，想回答局部最优，这种情况下，怎么办

A：1）主动澄清问题 -- 展示了你对问题的深入理解和解决复杂问题的能力， 2）结构化回答问题 -- 即使在信息不全的情况下，结构化地回答问题可以帮助你展示自己的思路和分析能力。这不仅能展示你的全面思考，还能帮助你在模糊的情境下保持清晰和条理。3）展示全面的分析能力 -- 在面试中，展示你全面的分析能力和解决问题的方法比仅仅给出一个具体答案更重要。即使面试官挑战你，也要保持自信，展示你的逻辑思维和分析过程。4）应对挑战和自我怀疑 -- 面对面试官的挑战，不要轻易自我怀疑。以下是一些应对策略：保持冷静， 承认不确定性， 专注过程：面试官更看重你的思考过程和解决问题的方法，而不是完美的答案。

Q：对于这个商业目标是提升20%的销售额，为什么觉得可以做到？或者会不会做不到？提出来的解决办法，从数据，模型，评估，优化，部署等，会不会能做的都做了


Q:对于机器学习系统设计的面试，好的performance是什么样子的，不好的performance 是什么样子的

A: 好的表现：
1. 对问题的清晰理解：表现：能够迅速理解和澄清问题，包括明确业务目标、现有数据、技术约束和预期成果。
2. 全面的解决方案：表现：提供结构化和全面的解决方案，涵盖数据、特征工程、模型选择、评估、优化和部署等所有环节。
3. 技术细节的掌握：表现：展示对各种机器学习算法、模型评估方法和优化策略的深入理解，并能合理选择和应用。
4. 问题解决能力：表现：能够识别并解决潜在的问题和挑战，提出合理的假设和解决方案。
5. 良好的沟通和表达：表现：能够清晰、逻辑地表达自己的思路和解决方案，与面试官有效互动。
6. 展示批判性思维和创新：表现：展示对现有方法的批判性思维，并能提出创新的解决方案或改进方法。


示例：
为了提升20%的销售额，我会从以下几个方面进行设计和优化：

1. **澄清业务目标**：提升20%的销售额具体是指通过推荐系统带来的直接销售额增加。
2. **数据收集与清洗**：收集用户的浏览记录、点击记录、购买历史等，进行数据清洗和特征工程。
3. **模型选择与训练**：使用协同过滤、矩阵分解和神经协同过滤等多种模型，进行超参数调优。
4. **模型评估与优化**：使用点击率（CTR）、转化率（CR）、AUC等指标进行评估，通过A/B测试和交叉验证优化模型。
5. **模型部署与监控**：将模型部署到生产环境中，设置实时监控指标，收集用户反馈，持续优化。

在实际过程中，我们还需要解决数据质量和数量的问题，考虑用户行为和市场变化带来的影响，并通过持续的实验和优化来提高推荐效果。我相信通过系统的设计和优化，我们可以实现提升20%销售额的目标。

不好的表现
1. 对问题理解不清：表现：没有主动澄清问题或误解了问题的核心，导致解决方案偏离目标。
2. 解决方案不全面：表现：提供的解决方案不完整，只关注某个方面（如模型选择），忽略了其他关键步骤。
3. 技术细节不准确或不充分：表现：对所提到的算法或技术细节解释不清楚或不准确，缺乏深度理解。
4. 忽略潜在问题和挑战：表现：未能识别和解决潜在的问题和挑战，解决方案缺乏可行性。
5. 沟通和表达不清晰：表现：表达思路混乱，逻辑不清，无法清晰地向面试官传达解决方案。
6. 缺乏批判性思维和创新：表现：没有展示批判性思维，只提供教科书式的答案，没有结合具体场景提出创新或改进。



示例：
为了提升20%的销售额，我会使用协同过滤算法来改进推荐系统。

我们会收集用户的行为数据，然后训练一个协同过滤模型。接下来，我们会评估模型的效果，确保模型能够准确地推荐商品。最后，我们会将模型部署到生产环境中。这个方法应该能够提升销售额。









有几个大模块需要单独学习

**模型部署**：
+ Continuous Integration/Continuous Deployment (CI/CD)： CI/CD Pipelines and 版本控制
+ Containerization and Orchestration: 容器化：使用Docker将模型和依赖打包成容器，确保环境一致性和可移植性 和 编排工具：使用Kubernetes管理和调度容器，实现高可用性和自动扩展
+ Model Serving： Model Serving Frameworks：使用TensorFlow Serving、TorchServe、Seldon等框架部署模型，提供高性能的API接口。和 在线推理：提供实时预测服务，支持高并发请求。
+ Feature Store： 特征存储：使用Feature Store（如Feast、Tecton）管理特征，确保训练和推理时使用一致的特征。
+ Monitoring and Logging： 监控 和 日志记录
A/B Testing and Experimentation：A/B测试 和 实验平台
+ Real-Time Data Processing：流处理框架 和 Lambda架构

